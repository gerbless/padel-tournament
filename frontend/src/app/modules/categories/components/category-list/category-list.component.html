<div class="container fade-in">
    <div class="flex-between mb-4">
        <h1>üè∑Ô∏è Gesti√≥n de Categor√≠as</h1>
    </div>

    <div class="card mb-4" *ngIf="canAdmin">
        <h3>{{ editingId ? '‚úèÔ∏è Editar Categor√≠a' : '‚ûï Nueva Categor√≠a' }}</h3>
        <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="form-grid">
            <div class="form-group">
                <label>Nombre</label>
                <input type="text" formControlName="name" placeholder="Ej: Primera">
            </div>
            <div class="form-group">
                <label>Nivel (1 = Mayor)</label>
                <input type="number" formControlName="level">
            </div>
            <div class="form-group">
                <label>Puntos M√≠nimos</label>
                <input type="number" formControlName="minPoints">
            </div>
            <div class="form-group">
                <label>Puntos M√°ximos</label>
                <input type="number" formControlName="maxPoints">
            </div>
            <div class="form-group" style="align-self: end;">
                <button type="submit" class="btn btn-primary" [disabled]="!categoryForm.valid">
                    {{ editingId ? 'Actualizar' : 'Guardar' }}
                </button>
                <button type="button" class="btn btn-secondary ml-2" *ngIf="editingId" (click)="resetForm()">
                    Cancelar
                </button>
            </div>
        </form>
    </div>

    <div class="grid grid-3">
        <div class="card category-card" *ngFor="let cat of categories">
            <div class="flex-between mb-2">
                <h3>{{ cat.name }}</h3>
                <span class="level-badge">Nivel {{ cat.level }}</span>
            </div>
            <div class="points-range">
                <span>{{ cat.minPoints }} pts</span>
                <span class="range-arrow">‚Üî</span>
                <span>{{ cat.maxPoints }} pts</span>
            </div>
            <div class="flex-end mt-4" *ngIf="canAdmin">
                <button class="btn btn-sm btn-secondary mr-2" (click)="edit(cat)">‚úèÔ∏è</button>
                <button class="btn btn-sm btn-danger" (click)="delete(cat.id!)">üóëÔ∏è</button>
            </div>
        </div>
    </div>
</div>