<div class="container fade-in">
    <div class="flex-between mb-4">
        <h1>ğŸ† Ranking Global</h1>
        <div class="search-box">
            <input type="text" [(ngModel)]="searchTerm" (input)="filterPlayers()" placeholder="ğŸ” Buscar jugador..."
                class="input search-input">
        </div>
    </div>

    <div *ngIf="loading" class="flex-center" style="min-height: 400px;">
        <div class="spinner"></div>
    </div>

    <div *ngIf="!loading && filteredPlayers.length === 0" class="card text-center">
        <h3>No se encontraron jugadores</h3>
        <p style="color: var(--text-muted); margin-top: var(--spacing-md);">
            Intenta con otro nombre o completa torneos para generar el ranking.
        </p>
    </div>

    <div *ngIf="!loading && filteredPlayers.length > 0" class="card fade-in">
        <div class="table-container">
            <table class="table-ranking mobile-card-table">
                <thead>
                    <tr>
                        <th style="width: 80px;">Pos</th>
                        <th>Jugador</th>
                        <th class="text-center">Puntos</th>
                        <th class="text-center">Torneos</th>
                        <th class="text-center">Victorias</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let player of filteredPlayers" [class.leader]="player.rank <= 3">
                        <td class="rank-cell" data-label="Pos">
                            <div class="rank-badge" [attr.data-rank]="player.rank">
                                <span *ngIf="player.rank === 1">ğŸ¥‡</span>
                                <span *ngIf="player.rank === 2">ğŸ¥ˆ</span>
                                <span *ngIf="player.rank === 3">ğŸ¥‰</span>
                                <span *ngIf="player.rank > 3">{{ player.rank }}</span>
                            </div>
                        </td>
                        <td class="player-cell" data-label="Jugador">{{ player.name }}</td>
                        <td class="text-center font-bold text-accent" data-label="Puntos">{{ player.totalPoints }}</td>
                        <td class="text-center" data-label="Torneos">{{ player.tournamentsPlayed }}</td>
                        <td class="text-center" data-label="Victorias">{{ player.matchesWon }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>